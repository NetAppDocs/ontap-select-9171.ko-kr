---
sidebar: sidebar 
permalink: concept_ha_config.html 
keywords: ontap select, high availability configurations, two-node ha, multi-node ha, mc sds 
summary: 사용자 환경에 가장 적합한 HA 구성을 선택하기 위해 고가용성 옵션을 알아보세요. 
---
= ONTAP Select 고가용성 구성
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
사용자 환경에 가장 적합한 HA 구성을 선택하기 위해 고가용성 옵션을 알아보세요.

고객들이 애플리케이션 워크로드를 엔터프라이즈급 스토리지 어플라이언스에서 범용 하드웨어 기반 소프트웨어 기반 솔루션으로 옮기기 시작했지만, 복원력과 내결함성에 대한 기대와 요구는 변함이 없습니다. 제로 복구 지점 목표(RPO)를 제공하는 HA 솔루션은 인프라 스택의 모든 구성 요소에서 장애가 발생하더라도 데이터 손실을 방지합니다.

SDS 시장의 상당 부분은 공유되지 않는 스토리지 개념을 기반으로 구축되었으며, 소프트웨어 복제는 여러 스토리지 사일로에 사용자 데이터의 여러 사본을 저장하여 데이터 복원력을 제공합니다.ONTAP ONTAP Select ONTAP 에서 제공하는 동기 복제 기능(RAID SyncMirror )을 사용하여 클러스터 내에 사용자 데이터의 추가 사본을 저장함으로써 이 전제를 기반으로 합니다. 이는 HA 쌍의 컨텍스트 내에서 발생합니다. 모든 HA 쌍은 두 개의 사용자 데이터 사본을 저장합니다.하나는 로컬 노드에서 제공하는 스토리지에, 다른 하나는 HA 파트너에서 제공하는 스토리지에 저장합니다.ONTAP ONTAP Select 클러스터 내에서 HA와 동기 복제는 함께 연결되며, 두 가지 기능을 분리하거나 독립적으로 사용할 수 없습니다. 결과적으로 동기 복제 기능은 다중 노드 오퍼링에서만 사용할 수 있습니다.


NOTE: ONTAP Select 클러스터에서 동기 복제 기능은 HA 구현의 일부이며, 비동기 SnapMirror 또는 SnapVault 복제 엔진을 대체하는 것이 아닙니다. 동기 복제는 HA와 별도로 사용할 수 없습니다.

ONTAP Select HA 배포 모델에는 다중 노드 클러스터(4, 6 또는 8노드)와 2노드 클러스터, 두 가지가 있습니다. 2노드 ONTAP Select 클러스터의 가장 큰 특징은 외부 중재 서비스를 사용하여 스플릿 브레인(split-brain) 시나리오를 해결한다는 것입니다. ONTAP Deploy VM은 구성하는 모든 2노드 HA 쌍의 기본 중재자 역할을 합니다.

두 가지 아키텍처는 다음 그림에 표현되어 있습니다.

*원격 중재자와 로컬 연결 스토리지를 사용하는 2노드 ONTAP Select 클러스터*

image:DDHA_01.jpg["원격 중재자와 로컬 연결 스토리지를 사용하는 2노드 ONTAP Select 클러스터"]


NOTE: 2노드 ONTAP Select 클러스터는 HA 쌍 하나와 미디에이터 하나로 구성됩니다. HA 쌍 내에서 각 클러스터 노드의 데이터 집계는 동기적으로 미러링되며, 장애 조치 발생 시 데이터 손실이 발생하지 않습니다.

*로컬 연결 스토리지를 사용하는 4노드 ONTAP Select 클러스터*image:DDHA_02.jpg["로컬 연결 스토리지를 사용하는 4노드 ONTAP Select 클러스터"]

* 4노드 ONTAP Select 클러스터는 두 개의 HA 쌍으로 구성됩니다. 6노드 및 8노드 클러스터는 각각 3개 및 4개의 HA 쌍으로 구성됩니다. 각 HA 쌍 내에서 각 클러스터 노드의 데이터 집계는 동기적으로 미러링되며, 장애 조치 발생 시 데이터 손실이 발생하지 않습니다.
* DAS 스토리지를 사용할 경우 물리적 서버에는 ONTAP Select 인스턴스가 하나만 있을 수 있습니다. ONTAP Select 시스템의 로컬 RAID 컨트롤러에 대한 비공유 액세스를 필요로 하며, 로컬에 연결된 디스크를 관리하도록 설계되었으므로 스토리지에 물리적으로 연결되지 않으면 불가능합니다.




== 2노드 HA 대 다중 노드 HA

FAS 어레이와 달리, HA 쌍의 ONTAP Select 노드는 IP 네트워크를 통해서만 통신합니다. 즉, IP 네트워크는 단일 장애 지점(SPOF)이 되므로 네트워크 분할 및 스플릿 브레인(split-brain) 시나리오로부터 보호하는 것이 설계의 중요한 측면이 됩니다. 다중 노드 클러스터는 세 개 이상의 생존 노드가 클러스터 쿼럼을 구성할 수 있으므로 단일 노드 장애를 견딜 수 있습니다. 2노드 클러스터는 ONTAP Deploy VM에서 호스팅하는 중재자 서비스를 사용하여 동일한 결과를 얻습니다.

ONTAP Select 노드와 ONTAP Deploy 중재자 서비스 간의 하트비트 네트워크 트래픽은 최소화되고 복원력이 뛰어나므로 ONTAP Deploy VM은 ONTAP Select 2노드 클러스터와 다른 데이터 센터에서 호스팅될 수 있습니다.


NOTE: ONTAP Deploy VM은 2노드 클러스터의 중재자 역할을 할 때 해당 클러스터의 필수적인 부분이 됩니다. 중재자 서비스를 사용할 수 없는 경우, 2노드 클러스터는 데이터 제공을 계속하지만 ONTAP Select 클러스터의 스토리지 장애 조치 기능은 비활성화됩니다. 따라서 ONTAP Deploy 중재자 서비스는 HA 쌍의 각 ONTAP Select 노드와 지속적으로 통신해야 합니다. 클러스터 쿼럼이 제대로 작동하려면 최소 5Mbps의 대역폭과 최대 125ms의 왕복 시간(RTT) 지연 시간이 필요합니다.

중재자 역할을 하는 ONTAP Deploy VM을 일시적으로 또는 영구적으로 사용할 수 없는 경우 보조 ONTAP Deploy VM을 사용하여 2노드 클러스터 쿼럼을 복원할 수 있습니다. 이로 인해 새 ONTAP Deploy VM이 ONTAP Select 노드를 관리할 수 없지만 클러스터 쿼럼 알고리즘에는 성공적으로 참여하는 구성이 됩니다. ONTAP Select 노드와 ONTAP Deploy VM 간의 통신은 IPv4를 통한 iSCSI 프로토콜을 사용하여 수행됩니다. ONTAP Select 노드 관리 IP 주소는 개시자이고 ONTAP Deploy VM IP 주소는 대상입니다. 따라서 2노드 클러스터를 생성할 때 노드 관리 IP 주소에 대해 IPv6 주소를 지원할 수 없습니다. ONTAP Deploy 호스팅된 사서함 디스크는 2노드 클러스터 생성 시 자동으로 생성되어 적절한 ONTAP Select 노드 관리 IP 주소로 마스킹됩니다. 전체 구성은 설정 중에 자동으로 수행되며 추가 관리 작업은 필요하지 않습니다. 클러스터를 생성하는 ONTAP Deploy 인스턴스는 해당 클러스터의 기본 중재자입니다.

원래 중재자 위치를 변경해야 하는 경우 관리 작업이 필요합니다. 원래 ONTAP Deploy VM이 손실된 경우에도 클러스터 쿼럼을 복구할 수 있습니다. 그러나 NetApp 2노드 클러스터가 인스턴스화될 때마다 ONTAP Deploy 데이터베이스를 백업할 것을 권장합니다.



== 2노드 HA 대 2노드 스트레치드 HA(MetroCluster SDS)

2노드 액티브/액티브 HA 클러스터를 더 먼 거리에 걸쳐 확장하고 각 노드를 다른 데이터 센터에 배치할 수도 있습니다. 2노드 클러스터와 2노드 확장 클러스터( MetroCluster SDS라고도 함)의 유일한 차이점은 노드 간 네트워크 연결 거리입니다.

2노드 클러스터는 두 노드가 모두 300m 거리 내의 동일한 데이터 센터에 위치한 클러스터로 정의됩니다. 일반적으로 두 노드는 동일한 네트워크 스위치 또는 ISL(Interswitch Link) 네트워크 스위치 세트에 대한 업링크를 갖습니다.

2노드 MetroCluster SDS는 노드들이 물리적으로 300m 이상 떨어져 있는 클러스터(서로 다른 방, 서로 다른 건물, 서로 다른 데이터 센터)로 정의됩니다. 또한, 각 노드의 업링크 연결은 별도의 네트워크 스위치에 연결됩니다. MetroCluster SDS는 전용 하드웨어를 필요로 하지 않습니다. 단, 해당 환경은 지연 시간(RTT 최대 5ms, 지터 최대 5ms, 총 10ms) 및 물리적 거리(최대 10km) 요건을 준수해야 합니다.

MetroCluster SDS는 프리미엄 기능이며 프리미엄 라이선스 또는 프리미엄 XL 라이선스가 필요합니다. 프리미엄 라이선스는 소규모 및 중규모 VM과 HDD 및 SSD 미디어 생성을 지원합니다. 프리미엄 XL 라이선스는 NVMe 드라이브 생성도 지원합니다.


NOTE: MetroCluster SDS는 로컬 연결 스토리지(DAS)와 공유 스토리지(vNAS) 모두에서 지원됩니다. vNAS 구성은 ONTAP Select VM과 공유 스토리지 간의 네트워크로 인해 일반적으로 더 높은 지연 시간을 갖습니다. MetroCluster SDS 구성은 공유 스토리지 지연 시간을 포함하여 노드 간에 최대 10ms의 지연 시간을 제공해야 합니다. 즉, Select VM 간의 지연 시간만 측정하는 것은 적절하지 않습니다. 이러한 구성에서는 공유 스토리지 지연 시간이 무시할 수 없기 때문입니다.
